ALTER SESSION SET CONTAINER = XEPDB1;

CREATE USER dkuser IDENTIFIED BY dkpassword;
GRANT CONNECT, RESOURCE TO dkuser;
ALTER USER dkuser QUOTA UNLIMITED ON users;

-- Cambiar al esquema del usuario recién creado
ALTER SESSION SET CURRENT_SCHEMA = DKUSER;

CREATE TABLE PARTICIPANTE (
    DNI VARCHAR(8) PRIMARY KEY,
    NOMBRE VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255) NOT NULL
);

CREATE TABLE INSCRIPCION (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DNI_PARTICIPANTE VARCHAR2(8) NOT NULL,
    EVENTO_ID VARCHAR(20) NOT NULL,
    FOREIGN KEY (DNI_PARTICIPANTE) REFERENCES PARTICIPANTE(DNI),
    UNIQUE (DNI_PARTICIPANTE)
);

-- Datos iniciales
INSERT INTO PARTICIPANTE (DNI, NOMBRE, EMAIL) VALUES ('45168670', 'Ana Torres', 'ana@example.com');
INSERT INTO PARTICIPANTE (DNI, NOMBRE, EMAIL) VALUES ('44467619', 'Luis Pérez', 'luis@example.com');

COMMIT;